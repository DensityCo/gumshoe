/** gumshoe v0.0.1, by Chris Ferdinandi | http://github.com/cferdinandi/gumshoe | Licensed under MIT: http://gomakethings.com/mit/ */
!function(e,t){"function"==typeof define&&define.amd?define("gumshoe",t(e)):"object"==typeof exports?module.exports=t(e):e.gumshoe=t(e)}(window||this,function(e){"use strict";var t,n,o,c,a,i,r={},s=!!document.querySelector&&!!e.addEventListener,u=[],l={offset:0,activeClass:"active",callbackBefore:function(){},callbackAfter:function(){}},f=function(e,t,n){if("[object Object]"===Object.prototype.toString.call(e))for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(n,e[o],o,e);else for(var c=0,a=e.length;a>c;c++)t.call(n,e[c],c,e)},d=function(e,t){var n={};return f(e,function(t,o){n[o]=e[o]}),f(t,function(e,o){n[o]=t[o]}),n},m=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},v=function(e){return Math.max(e.scrollHeight,e.offsetHeight,e.clientHeight)},h=function(e){var n=0;if(e.offsetParent)do n+=e.offsetTop,e=e.offsetParent;while(e);return n=n-a-t.offset,n>=0?n:0},p=function(){u.sort(function(e,t){return e.distance>t.distance?-1:e.distance<t.distance?1:0})},g=function(){o=m(),a=c?v(c)+h(c):0,f(u,function(e){e.distance=h(e.target)})},y=function(){var e=document.querySelectorAll("[data-gumshoe] a");f(e,function(e){e.hash&&u.push({nav:e,target:document.querySelector(e.hash),parent:"li"===e.parentNode.tagName.toLowerCase()?e.parentNode:null,distance:0})})},H=function(e){i&&(i.nav.classList.remove(t.activeClass),i.parent&&i.parent.classList.remove(t.activeClass)),e.nav.classList.add(t.activeClass),e.parent&&e.parent.classList.add(t.activeClass),i={nav:e.nav,parent:e.parent}},b=function(){var t=e.pageYOffset;if(e.innerHeight+t>=o)return H(u[0]);for(var n=0,c=u.length;c>n;n++){var a=u[n];if(a.distance<t)return H(a)}};r.destroy=function(){t&&(document.documentElement.classList.remove(t.initClass),document.removeEventListener("click",eventHandler,!1),t=null,n=null)};var L=function(e){n||(n=setTimeout(function(){n=null,"scroll"===e.type&&b(),"resize"===e.type&&(g(),p(),b())},66))};return r.init=function(n){s&&(t=d(l,n||{}),c=document.querySelector("[data-gumshoe-header]"),y(),g(),p(),e.addEventListener("resize",L,!1),e.onscroll=L)},r});